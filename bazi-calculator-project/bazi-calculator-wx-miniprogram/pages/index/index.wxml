<!-- pages/index/index.wxml -->
<view class="container {{darkMode ? 'dark-mode' : ''}}">
  <view class="header">
    <view class="logo">
      <image src="/images/logo.png" mode="aspectFit"></image>
      <text class="title">å¢¨è¡å­å…«å­—</text>
    </view>
    
    <view class="actions">
      <view class="language-selector">
        <view class="language-btn {{language === 'zh-TW' ? 'active' : ''}}" bindtap="changeLanguage" data-lang="zh-TW">ç¹é«”</view>
        <view class="language-btn {{language === 'zh-CN' ? 'active' : ''}}" bindtap="changeLanguage" data-lang="zh-CN">ç®€ä½“</view>
      </view>
      <view class="theme-toggle" bindtap="toggleTheme">
        <text class="theme-icon">{{darkMode ? 'ğŸŒ™' : 'ğŸ”†'}}</text>
      </view>
    </view>
  </view>

  <view class="intro-section">
    <text class="subtitle">æ¢ç´¢å‘½è¿å¤©æœºï¼Œå¯»æ±‚äººç”ŸæŒ‡å¼•</text>
  </view>

  <view class="bazi-form card">
    <text class="form-title">è¯·è¾“å…¥æ‚¨çš„å‡ºç”Ÿä¿¡æ¯</text>
    
    <view class="date-type-switch">
      <view class="switch-btn {{isLunar ? 'active' : ''}}" bindtap="switchCalendarType" data-type="lunar">å†œå†</view>
      <view class="switch-btn {{!isLunar ? 'active' : ''}}" bindtap="switchCalendarType" data-type="solar">é˜³å†</view>
    </view>
    
    <view class="form-group">
      <text class="label">å¹´</text>
      <picker mode="selector" range="{{years}}" range-key="label" bindchange="bindYearChange" value="{{form.lunarYear - 1900}}">
        <view class="picker">
          {{years[form.lunarYear - 1900].label}}
        </view>
      </picker>
    </view>
    
    <view class="form-group">
      <text class="label">æœˆ</text>
      <picker mode="selector" range="{{months}}" range-key="label" bindchange="bindMonthChange" value="{{form.lunarMonth - 1}}">
        <view class="picker">
          {{months[form.lunarMonth - 1].label}}
        </view>
      </picker>
    </view>
    
    <view class="form-group">
      <text class="label">æ—¥</text>
      <picker mode="selector" range="{{days}}" range-key="label" bindchange="bindDayChange" value="{{form.lunarDay - 1}}">
        <view class="picker">
          {{days[form.lunarDay - 1].label}}
        </view>
      </picker>
    </view>
    
    <view class="form-group">
      <text class="label">æ—¶è¾°</text>
      <picker mode="selector" range="{{hours}}" range-key="label" bindchange="bindHourChange" value="{{hourIndex}}">
        <view class="picker">
          {{hours[hourIndex].label}}
        </view>
      </picker>
    </view>
    
    <view class="form-actions">
      <button class="btn primary" bindtap="calculateBazi" disabled="{{loading}}">
        {{loading ? 'æ­£åœ¨æ¨ç®—...' : 'æ¨ç®—å‘½ç›˜'}}
      </button>
      <button class="btn secondary" bindtap="resetForm" disabled="{{loading}}">
        é‡è®¾
      </button>
    </view>
  </view>

  <view class="footer">
    <text>ç‰ˆæƒæ‰€æœ‰ Â© 2023 å¢¨è¡å­å…«å­—</text>
  </view>
</view>