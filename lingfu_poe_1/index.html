<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>灵验咒符查询系统</title>
    <style>
        :root {
            --primary-color: #a81c07;
            --secondary-color: #d4a017;
            --background-color: #0d0d0d;
            --text-color: #e6dbbf;
            --accent-color: #8b0000;
            --card-color: rgba(20, 20, 20, 0.85);
            --border-color: #664d03;
            --glow-color: rgba(212, 160, 23, 0.7);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background-color: var(--background-color);
            color: var(--text-color);
            background-image: url("data:image/svg+xml,%3Csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3Cpattern id='pattern' width='100' height='100' patternUnits='userSpaceOnUse'%3E%3Ccircle cx='50' cy='50' r='3' fill='%23600' opacity='0.2'/%3E%3C/pattern%3E%3C/defs%3E%3Crect width='100%25' height='100%25' fill='url(%23pattern)'/%3E%3C/svg%3E");
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
            font-family: "楷体", "KaiTi", "STKaiti", serif;
        }
        
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, transparent 0%, var(--background-color) 90%);
            z-index: -1;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }
        
        h1 {
            font-size: 3rem;
            color: var(--secondary-color);
            text-shadow: 0 0 10px rgba(212, 160, 23, 0.5), 0 0 20px rgba(212, 160, 23, 0.3);
            margin-bottom: 15px;
            letter-spacing: 4px;
            position: relative;
            display: inline-block;
        }
        
        h1::after {
            content: "";
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 120%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--secondary-color), transparent);
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: var(--text-color);
            opacity: 0.8;
            margin-bottom: 30px;
        }
        
        .language-selector {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 10px;
            z-index: 100;
        }
        
        .language-btn {
            background-color: rgba(30, 30, 30, 0.8);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            border-radius: 5px;
            padding: 5px 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .language-btn:hover, .language-btn.active {
            background-color: var(--primary-color);
            color: var(--text-color);
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
        }
        
        .input-section {
            background-color: var(--card-color);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(5px);
        }
        
        .input-section::before {
            content: "";
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23d4a017' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
            z-index: -1;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-size: 1.1rem;
            color: var(--secondary-color);
        }
        
        select, button {
            background-color: rgba(30, 30, 30, 0.9);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            padding: 12px 15px;
            width: 100%;
            border-radius: 5px;
            font-size: 1rem;
            transition: all 0.3s ease;
            appearance: none;
            cursor: pointer;
        }
        
        select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23d4a017' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 20px;
            padding-right: 40px;
        }
        
        select:focus, button:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(212, 160, 23, 0.5);
            border-color: var(--secondary-color);
        }
        
        .selections {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .btn-query {
            background: linear-gradient(to right, var(--accent-color), var(--primary-color));
            color: var(--text-color);
            border: none;
            padding: 15px;
            font-size: 1.2rem;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            letter-spacing: 2px;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
            margin-top: 10px;
            display: block;
            width: 100%;
        }
        
        .btn-query:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }
        
        .btn-query::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255, 255, 255, 0) 0%,
                rgba(255, 255, 255, 0.1) 100%
            );
            transform: rotate(30deg);
            transition: all 0.5s ease;
            z-index: 1;
        }
        
        .btn-query:hover::before {
            transform: rotate(30deg) translate(10%, 10%);
        }
        
        .btn-query span {
            position: relative;
            z-index: 2;
        }
        
        .result-section {
            display: none;
            background-color: var(--card-color);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }
        
        .result-section::before {
            content: "";
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23d4a017' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
            z-index: -1;
        }
        
        .result-header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }
        
        .result-header h2 {
            font-size: 2rem;
            color: var(--secondary-color);
            margin-bottom: 10px;
            display: inline-block;
            position: relative;
        }
        
        .result-header h2::after {
            content: "";
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--secondary-color), transparent);
        }
        
        .input-summary {
            font-size: 1.1rem;
            margin-bottom: 20px;
            padding: 15px;
            background-color: rgba(50, 50, 50, 0.3);
            border-radius: 5px;
            border-left: 3px solid var(--secondary-color);
        }
        
        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .result-card {
            background-color: rgba(30, 30, 30, 0.7);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 0.5s forwards;
        }
        
        .result-card:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .result-card:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        .result-card:nth-child(4) {
            animation-delay: 0.6s;
        }
        
        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .result-card h3 {
            color: var(--secondary-color);
            margin-bottom: 15px;
            position: relative;
            display: inline-block;
            font-size: 1.4rem;
        }
        
        .result-card h3::after {
            content: "";
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, var(--secondary-color), transparent);
        }
        
        .result-card p {
            font-size: 1.1rem;
            line-height: 1.5;
        }
        
        .fortune-level {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 4px;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .great-fortune {
            background-color: rgba(0, 128, 0, 0.2);
            color: #adff2f;
            border: 1px solid #006400;
        }
        
        .good-fortune {
            background-color: rgba(135, 206, 250, 0.2);
            color: #add8e6;
            border: 1px solid #1e90ff;
        }
        
        .bad-fortune {
            background-color: rgba(255, 165, 0, 0.2);
            color: #ffa500;
            border: 1px solid #ff8c00;
        }
        
        .terrible-fortune {
            background-color: rgba(255, 0, 0, 0.2);
            color: #ff6347;
            border: 1px solid #8b0000;
        }
        
        .lingfu-actions {
            display: flex;
            margin-top: 15px;
            justify-content: flex-end;
        }
        
        .get-lingfu-btn {
            background: linear-gradient(to right, #146B3A, #165B33);
            color: var(--text-color);
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .get-lingfu-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .get-lingfu-btn::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255, 255, 255, 0) 0%,
                rgba(255, 255, 255, 0.1) 100%
            );
            transform: rotate(30deg);
            transition: all 0.5s ease;
            z-index: 1;
        }
        
        .get-lingfu-btn:hover::before {
            transform: rotate(30deg) translate(10%, 10%);
        }
        
        .get-lingfu-btn span {
            position: relative;
            z-index: 2;
        }
        
        .usage-method {
            margin-top: 30px;
            background-color: rgba(30, 30, 30, 0.7);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 0.5s 0.8s forwards;
        }
        
        .usage-method h3 {
            color: var(--secondary-color);
            margin-bottom: 15px;
            position: relative;
            display: inline-block;
            font-size: 1.4rem;
        }
        
        .usage-method h3::after {
            content: "";
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, var(--secondary-color), transparent);
        }
        
        .usage-method ol {
            padding-left: 20px;
        }
        
        .usage-method li {
            margin-bottom: 10px;
            font-size: 1.1rem;
            line-height: 1.5;
        }
        
        .animation-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
            display: none;
        }
        
        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
        }
        
        .talisman {
            position: absolute;
            width: 120px;
            height: 120px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath fill='%23d4a017' d='M50 5 L95 50 L50 95 L5 50 Z'/%3E%3Cpath fill='none' stroke='%23a81c07' stroke-width='2' d='M25 25 L75 75 M75 25 L25 75 M50 10 L50 90 M10 50 L90 50'/%3E%3Ccircle cx='50' cy='50' r='10' fill='%23a81c07'/%3E%3C/svg%3E");
            background-size: contain;
            opacity: 0;
            transform: translate(-50%, -50%) rotate(0deg) scale(0.5);
            animation: talismanAnimation 3s forwards;
            filter: drop-shadow(0 0 10px var(--glow-color));
        }
        
        @keyframes talismanAnimation {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) rotate(0deg) scale(0.5);
            }
            20% {
                opacity: 1;
                transform: translate(-50%, -50%) rotate(180deg) scale(1);
            }
            80% {
                opacity: 1;
                transform: translate(-50%, -50%) rotate(720deg) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) rotate(1080deg) scale(0.5);
            }
        }
        
        .energy-particle {
            position: absolute;
            width: 5px;
            height: 5px;
            background-color: var(--secondary-color);
            border-radius: 50%;
            opacity: 0;
            box-shadow: 0 0 5px var(--glow-color);
        }
        
        .flying-symbol {
            position: absolute;
            font-size: 30px;
            color: var(--secondary-color);
            opacity: 0;
            transform: translate(-50%, -50%);
            text-shadow: 0 0 10px var(--glow-color);
        }
        
        @keyframes particleAnimation {
            0% {
                opacity: 1;
                transform: translate(0, 0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(var(--tx), var(--ty)) scale(0.5);
            }
        }
        
        @keyframes symbolAnimation {
            0% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(2) rotate(var(--rotate));
            }
        }
        
        footer {
            text-align: center;
            margin-top: 50px;
            padding: 20px;
            color: rgba(230, 219, 191, 0.7);
            font-size: 0.9rem;
            border-top: 1px solid rgba(102, 77, 3, 0.3);
        }
        
        .glow-effect {
            animation: glowEffect 2s infinite alternate;
        }
        
        @keyframes glowEffect {
            from {
                text-shadow: 0 0 5px rgba(212, 160, 23, 0.5), 0 0 10px rgba(212, 160, 23, 0.3);
            }
            to {
                text-shadow: 0 0 10px rgba(212, 160, 23, 0.7), 0 0 20px rgba(212, 160, 23, 0.5), 0 0 30px rgba(212, 160, 23, 0.3);
            }
        }
        
        .floating-elements {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
            z-index: -1;
        }
        
        .floating-symbol {
            position: absolute;
            color: var(--secondary-color);
            opacity: 0.05;
            font-size: 2rem;
            animation: floatAnimation linear infinite;
        }
        
        @keyframes floatAnimation {
            0% {
                transform: translateY(0) rotate(0deg);
            }
            100% {
                transform: translateY(-100vh) rotate(360deg);
            }
        }
        
        /* Magic circle animation */
        .magic-circle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300px;
            height: 300px;
            opacity: 0;
            animation: magicCircleAnimation 3s forwards;
        }
        
        .circle-layer {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 2px solid var(--secondary-color);
            box-shadow: 0 0 15px var(--glow-color);
            opacity: 0.5;
        }
        
        .circle-layer:nth-child(1) {
            animation: rotateCircle 5s linear infinite;
        }
        
        .circle-layer:nth-child(2) {
            width: 80%;
            height: 80%;
            top: 10%;
            left: 10%;
            animation: rotateCircle 7s linear infinite reverse;
        }
        
        .circle-layer:nth-child(3) {
            width: 60%;
            height: 60%;
            top: 20%;
            left: 20%;
            animation: rotateCircle 9s linear infinite;
        }
        
        .circle-layer:nth-child(4) {
            width: 40%;
            height: 40%;
            top: 30%;
            left: 30%;
            animation: rotateCircle 11s linear infinite reverse;
        }
        
        .magic-symbols {
            position: absolute;
            width: 100%;
            height: 100%;
            animation: rotateCircle 15s linear infinite;
        }
        
        .magic-symbol {
            position: absolute;
            color: var(--secondary-color);
            font-size: 1.5rem;
            text-shadow: 0 0 5px var(--glow-color);
        }
        
        @keyframes rotateCircle {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }
        
        @keyframes magicCircleAnimation {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.5);
            }
            20% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
            80% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(1.5);
            }
        }
        
        /* Responsiveness */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .subtitle {
                font-size: 1rem;
            }
            
            .input-section, .result-section {
                padding: 20px;
            }
            
            .selections {
                grid-template-columns: 1fr;
            }
            
            .result-grid {
                grid-template-columns: 1fr;
            }
            
            .language-selector {
                position: relative;
                top: unset;
                right: unset;
                justify-content: center;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <div id="particles-js"></div>
    <div class="floating-elements">
        <!-- Floating symbols will be added dynamically -->
    </div>
    
    <div class="animation-container" id="animationContainer">
        <!-- Animation elements will be added dynamically -->
    </div>
    
    <div class="container">
        <div class="language-selector">
            <button class="language-btn active" data-lang="zh_CN">简体中文</button>
            <button class="language-btn" data-lang="zh_TW">繁體中文</button>
            <button class="language-btn" data-lang="en">English</button>
            <button class="language-btn" data-lang="ja">日本語</button>
            <button class="language-btn" data-lang="ko">한국어</button>
        </div>
        
        <header>
            <h1 class="glow-effect" id="mainTitle">灵验咒符查询系统</h1>
            <div class="subtitle" id="subtitle">探寻天机，解析命运，消灾纳福，趋吉避凶</div>
        </header>
        
        <section class="input-section">
            <div class="selections">
                <div class="form-group">
                    <label for="birthYear" id="birthYearLabel">阴历出生年份</label>
                    <select id="birthYear">
                        <option value="" id="selectPrompt">请选择</option>
                        <!-- Years will be dynamically added via JavaScript -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="birthMonth" id="birthMonthLabel">阴历出生月份</label>
                    <select id="birthMonth">
                        <option value="" id="selectMonthPrompt">请选择</option>
                        <!-- Months will be dynamically added via JavaScript -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="birthTime" id="birthTimeLabel">出生时辰</label>
                    <select id="birthTime">
                        <option value="" id="selectTimePrompt">请选择</option>
                        <!-- Times will be dynamically added via JavaScript -->
                    </select>
                </div>
            </div>
            
            <button class="btn-query" id="queryBtn"><span id="queryBtnText">灵符查询</span></button>
        </section>
        
        <section class="result-section" id="resultSection">
            <div class="result-header">
                <h2 id="resultTitle">灵验咒符分析结果</h2>
            </div>
            
            <div class="input-summary" id="inputSummary">
                <!-- Will be filled dynamically -->
            </div>
            
            <div class="result-grid">
                <div class="result-card">
                    <h3 id="bengMingTitle">本命宫位</h3>
                    <p id="bengMingResult">loading...</p>
                </div>
                
                <div class="result-card">
                    <h3 id="suiJunTitle">岁君</h3>
                    <p id="suiJunResult">loading...</p>
                </div>
                
                <div class="result-card">
                    <h3 id="fortuneTitle">吉凶</h3>
                    <p id="fortuneResult">loading...</p>
                </div>
                
                <div class="result-card">
                    <h3 id="lingFuTitle">灵符</h3>
                    <p id="lingFuResult">loading...</p>
                    <div class="lingfu-actions">
                        <button class="get-lingfu-btn" id="getLingfuBtn">
                            <span id="getLingfuText">去请灵符</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="result-card">
                <h3 id="effectTitle">效用</h3>
                <p id="effectResult">loading...</p>
            </div>
            
            <div class="usage-method">
                <h3 id="usageTitle">灵符使用方法</h3>
                <ol id="usageSteps">
                    <li>在佛堂或者干净的地方，于太阳出后至中午 13:00 之间进行，个别符咒使用非此时段。</li>
                    <li>折角：南无大慈悲父！（三遍）</li>
                    <li>请灵验咒符的神灵、天人、护法神降临！（三遍）</li>
                    <li>摆供：红、香、花、果、茶、糕饼等，随方便进行供养，本门子孙皆可供养。</li>
                    <li>祈请师父、本命、护法降临！（遍）</li>
                    <li>祈请灵验咒符的神灵、天人、护法护佑！（三遍）</li>
                    <li>把自己所要变的解除灾难的事情说明，请求加持和护佑。</li>
                    <li>念念子大明咒 21 遍以上，回向灵验咒符的神灵、天人、护法神，感恩他们。</li>
                    <li>将祈祷等花化，或化香，或焚纸于火，具体请参考灵符卷内的谕示文字。</li>
                </ol>
            </div>
        </section>
    </div>
    
    <footer>
        <span id="footerText">灵验咒符查询系统 © 2025 | 趋吉避凶，消灾纳福</span>
    </footer>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        // Language support
        const translations = {
            zh_CN: {
                mainTitle: "灵验咒符查询系统",
                subtitle: "探寻天机，解析命运，消灾纳福，趋吉避凶",
                birthYearLabel: "阴历出生年份",
                birthMonthLabel: "阴历出生月份",
                birthTimeLabel: "出生时辰",
                selectPrompt: "请选择",
                selectMonthPrompt: "请选择",
                selectTimePrompt: "请选择",
                queryBtnText: "灵符查询",
                resultTitle: "灵验咒符分析结果",
                bengMingTitle: "本命宫位",
                suiJunTitle: "岁君",
                fortuneTitle: "吉凶",
                lingFuTitle: "灵符",
                effectTitle: "效用",
                usageTitle: "灵符使用方法",
                getLingfuText: "去请灵符",
                footerText: "灵验咒符查询系统 &copy; 2025 | 趋吉避凶，消灾纳福",
                yearSuffix: "年",
                monthNames: ["", "正月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一月", "十二月"],
                timeNames: {
                    "子": "子时 (23:00-01:00)",
                    "丑": "丑时 (01:00-03:00)",
                    "寅": "寅时 (03:00-05:00)",
                    "卯": "卯时 (05:00-07:00)",
                    "辰": "辰时 (07:00-09:00)",
                    "巳": "巳时 (09:00-11:00)",
                    "午": "午时 (11:00-13:00)",
                    "未": "未时 (13:00-15:00)",
                    "申": "申时 (15:00-17:00)",
                    "酉": "酉时 (17:00-19:00)",
                    "戌": "戌时 (19:00-21:00)",
                    "亥": "亥时 (21:00-23:00)"
                },
                zodiacSigns: ["鼠", "牛", "虎", "兔", "龙", "蛇", "马", "羊", "猴", "鸡", "狗", "猪"],
                inputSummaryTpl: "阴历出生：$birthYear年（$birthZodiac年）$birthMonth$birthTime | 当前年份：$currentYear年（$currentYearZodiac年）",
                greatFortune: "大吉",
                goodFortune: "小吉",
                badFortune: "小凶",
                terribleFortune: "大凶",
                extreme: "极端",
                validationMsg: "请完整填写阴历出生年月和时辰信息！",
                usageSteps: [
                    "在佛堂或者干净的地方，于太阳出后至中午 13:00 之间进行，个别符咒使用非此时段。",
                    "折角：南无大慈悲父！（三遍）",
                    "请灵验咒符的神灵、天人、护法神降临！（三遍）",
                    "摆供：红、香、花、果、茶、糕饼等，随方便进行供养，本门子孙皆可供养。",
                    "祈请师父、本命、护法降临！（遍）",
                    "祈请灵验咒符的神灵、天人、护法护佑！（三遍）",
                    "把自己所要变的解除灾难的事情说明，请求加持和护佑。",
                    "念念子大明咒 21 遍以上，回向灵验咒符的神灵、天人、护法神，感恩他们。",
                    "将祈祷等花化，或化香，或焚纸于火，具体请参考灵符卷内的谕示文字。"
                ]
            },
            zh_TW: {
                mainTitle: "靈驗咒符查詢系統",
                subtitle: "探尋天機，解析命運，消災納福，趨吉避凶",
                birthYearLabel: "陰曆出生年份",
                birthMonthLabel: "陰曆出生月份",
                birthTimeLabel: "出生時辰",
                selectPrompt: "請選擇",
                selectMonthPrompt: "請選擇",
                selectTimePrompt: "請選擇",
                queryBtnText: "靈符查詢",
                resultTitle: "靈驗咒符分析結果",
                bengMingTitle: "本命宮位",
                suiJunTitle: "歲君",
                fortuneTitle: "吉凶",
                lingFuTitle: "靈符",
                effectTitle: "效用",
                usageTitle: "靈符使用方法",
                getLingfuText: "去請靈符",
                footerText: "靈驗咒符查詢系統 &copy; 2025 | 趨吉避凶，消災納福",
                yearSuffix: "年",
                monthNames: ["", "正月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一月", "十二月"],
                timeNames: {
                    "子": "子時 (23:00-01:00)",
                    "丑": "丑時 (01:00-03:00)",
                    "寅": "寅時 (03:00-05:00)",
                    "卯": "卯時 (05:00-07:00)",
                    "辰": "辰時 (07:00-09:00)",
                    "巳": "巳時 (09:00-11:00)",
                    "午": "午時 (11:00-13:00)",
                    "未": "未時 (13:00-15:00)",
                    "申": "申時 (15:00-17:00)",
                    "酉": "酉時 (17:00-19:00)",
                    "戌": "戌時 (19:00-21:00)",
                    "亥": "亥時 (21:00-23:00)"
                },
                zodiacSigns: ["鼠", "牛", "虎", "兔", "龍", "蛇", "馬", "羊", "猴", "雞", "狗", "豬"],
                inputSummaryTpl: "陰曆出生：$birthYear年（$birthZodiac年）$birthMonth$birthTime | 當前年份：$currentYear年（$currentYearZodiac年）",
                greatFortune: "大吉",
                goodFortune: "小吉",
                badFortune: "小凶",
                terribleFortune: "大凶",
                extreme: "極端",
                validationMsg: "請完整填寫陰曆出生年月和時辰信息！",
                usageSteps: [
                    "在佛堂或者乾淨的地方，於太陽出後至中午 13:00 之間進行，個別符咒使用非此時段。",
                    "折角：南無大慈悲父！（三遍）",
                    "請靈驗咒符的神靈、天人、護法神降臨！（三遍）",
                    "擺供：紅、香、花、果、茶、糕餅等，隨方便進行供養，本門子孫皆可供養。",
                    "祈請師父、本命、護法降臨！（遍）",
                    "祈請靈驗咒符的神靈、天人、護法護佑！（三遍）",
                    "把自己所要變的解除災難的事情說明，請求加持和護佑。",
                    "念念子大明咒 21 遍以上，回向靈驗咒符的神靈、天人、護法神，感恩他們。",
                    "將祈禱等花化，或化香，或焚紙於火，具體請參考靈符卷內的諭示文字。"
                ]
            },
            en: {
                mainTitle: "Mystical Talisman Query System",
                subtitle: "Explore Heaven's Secrets, Decode Destiny, Avert Misfortune, Attract Blessings",
                birthYearLabel: "Lunar Birth Year",
                birthMonthLabel: "Lunar Birth Month",
                birthTimeLabel: "Birth Hour",
                selectPrompt: "Please Select",
                selectMonthPrompt: "Please Select",
                selectTimePrompt: "Please Select",
                queryBtnText: "Find My Talisman",
                resultTitle: "Talisman Analysis Results",
                bengMingTitle: "Life Palace Position",
                suiJunTitle: "Year Deity",
                fortuneTitle: "Fortune",
                lingFuTitle: "Talisman",
                effectTitle: "Effects",
                usageTitle: "Talisman Usage Instructions",
                getLingfuText: "Get Talisman",
                footerText: "Mystical Talisman Query System &copy; 2025 | Seek Fortune, Avoid Misfortune",
                yearSuffix: "",
                monthNames: ["", "1st Lunar Month", "2nd Lunar Month", "3rd Lunar Month", "4th Lunar Month", "5th Lunar Month", "6th Lunar Month", "7th Lunar Month", "8th Lunar Month", "9th Lunar Month", "10th Lunar Month", "11th Lunar Month", "12th Lunar Month"],
                timeNames: {
                    "子": "Zi Hour (23:00-01:00)",
                    "丑": "Chou Hour (01:00-03:00)",
                    "寅": "Yin Hour (03:00-05:00)",
                    "卯": "Mao Hour (05:00-07:00)",
                    "辰": "Chen Hour (07:00-09:00)",
                    "巳": "Si Hour (09:00-11:00)",
                    "午": "Wu Hour (11:00-13:00)",
                    "未": "Wei Hour (13:00-15:00)",
                    "申": "Shen Hour (15:00-17:00)",
                    "酉": "You Hour (17:00-19:00)",
                    "戌": "Xu Hour (19:00-21:00)",
                    "亥": "Hai Hour (21:00-23:00)"
                },
                zodiacSigns: ["Rat", "Ox", "Tiger", "Rabbit", "Dragon", "Snake", "Horse", "Goat", "Monkey", "Rooster", "Dog", "Pig"],
                inputSummaryTpl: "Lunar Birth: Year $birthYear ($birthZodiac), $birthMonth, $birthTime | Current Year: $currentYear ($currentYearZodiac)",
                greatFortune: "Great Fortune",
                goodFortune: "Good Fortune",
                badFortune: "Minor Misfortune",
                terribleFortune: "Major Misfortune",
                extreme: "Extreme",
                validationMsg: "Please complete all lunar birth information!",
                usageSteps: [
                    "Find a clean space or altar and perform the ritual between sunrise and 13:00 (1 PM), though some talismans require different times.",
                    "Fold the corner while reciting: 'Homage to the Great Compassionate Father!' (three times)",
                    "Invite the deities, celestial beings, and guardian spirits of the talisman to descend! (three times)",
                    "Make offerings: red items, incense, flowers, fruits, tea, and cakes as convenient.",
                    "Invite your master, natal deities, and guardian spirits to descend!",
                    "Request protection from the talisman's deities, celestial beings, and guardian spirits! (three times)",
                    "Explain the calamity you wish to resolve and request blessings and protection.",
                    "Recite the Great Bright Mantra 21 times or more, dedicating the merit to the talisman's deities, celestial beings, and guardian spirits, with gratitude.",
                    "Burn the offerings as flowers, incense, or paper in fire, following the specific instructions in the talisman scrolls."
                ]
            },
            ja: {
                mainTitle: "霊験符術検索システム",
                subtitle: "天機を探り、運命を解析し、禍を避け、福を招く",
                birthYearLabel: "旧暦生年",
                birthMonthLabel: "旧暦生月",
                birthTimeLabel: "生まれ時刻",
                selectPrompt: "選択してください",
                selectMonthPrompt: "選択してください",
                selectTimePrompt: "選択してください",
                queryBtnText: "符術を検索",
                resultTitle: "霊験符術分析結果",
                bengMingTitle: "本命宮位",
                suiJunTitle: "歳君",
                fortuneTitle: "吉凶",
                lingFuTitle: "霊符",
                effectTitle: "効能",
                usageTitle: "霊符使用方法",
                getLingfuText: "霊符を請う",
                footerText: "霊験符術検索システム &copy; 2025 | 吉を招き、凶を避ける",
                yearSuffix: "年",
                monthNames: ["", "正月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一月", "十二月"],
                timeNames: {
                    "子": "子の刻 (23:00-01:00)",
                    "丑": "丑の刻 (01:00-03:00)",
                    "寅": "寅の刻 (03:00-05:00)",
                    "卯": "卯の刻 (05:00-07:00)",
                    "辰": "辰の刻 (07:00-09:00)",
                    "巳": "巳の刻 (09:00-11:00)",
                    "午": "午の刻 (11:00-13:00)",
                    "未": "未の刻 (13:00-15:00)",
                    "申": "申の刻 (15:00-17:00)",
                    "酉": "酉の刻 (17:00-19:00)",
                    "戌": "戌の刻 (19:00-21:00)",
                    "亥": "亥の刻 (21:00-23:00)"
                },
                zodiacSigns: ["子（ねずみ）", "丑（うし）", "寅（とら）", "卯（うさぎ）", "辰（たつ）", "巳（へび）", "午（うま）", "未（ひつじ）", "申（さる）", "酉（とり）", "戌（いぬ）", "亥（いのしし）"],
                inputSummaryTpl: "旧暦生年月：$birthYear年（$birthZodiac）$birthMonth $birthTime | 現在の年：$currentYear年（$currentYearZodiac）",
                greatFortune: "大吉",
                goodFortune: "小吉",
                badFortune: "小凶",
                terribleFortune: "大凶",
                extreme: "極端",
                validationMsg: "旧暦生年月と時刻情報を完全に入力してください！",
                usageSteps: [
                    "仏壇や清潔な場所で、日の出から正午13:00までの間に行います（一部の符は異なる時間に使用）。",
                    "角を折りながら「南無大慈悲父！」と三度唱えます。",
                    "霊験符術の神霊、天人、護法神の降臨を三度請います。",
                    "赤、香、花、果物、茶、お菓子などを便宜に従って供養します。本門の子孫はすべて供養できます。",
                    "師父、本命、護法の降臨を請います。",
                    "霊験符術の神霊、天人、護法の加護を三度請います。",
                    "解決したい災難について説明し、加持と加護を請います。",
                    "大明呪を21回以上唱え、霊験符術の神霊、天人、護法神に回向し、感謝します。",
                    "祈りを花や香に変え、または紙を火で焼き、具体的には霊符巻内の指示に従います。"
                ]
            },
            ko: {
                mainTitle: "영험부적 검색시스템",
                subtitle: "천기를 탐구하고, 운명을 해석하며, 재앙을 피하고 복을 불러오다",
                birthYearLabel: "음력 출생년도",
                birthMonthLabel: "음력 출생월",
                birthTimeLabel: "출생시간",
                selectPrompt: "선택해주세요",
                selectMonthPrompt: "선택해주세요",
                selectTimePrompt: "선택해주세요",
                queryBtnText: "부적 검색",
                resultTitle: "영험부적 분석결과",
                bengMingTitle: "본명궁위",
                suiJunTitle: "세군",
                fortuneTitle: "길흉",
                lingFuTitle: "영부",
                effectTitle: "효능",
                usageTitle: "영부 사용방법",
                getLingfuText: "부적 청하기",
                footerText: "영험부적 검색시스템 &copy; 2025 | 길함을 추구하고 흉함을 피하다",
                yearSuffix: "년",
                monthNames: ["", "정월", "이월", "삼월", "사월", "오월", "유월", "칠월", "팔월", "구월", "시월", "십일월", "십이월"],
                timeNames: {
                    "子": "자시 (23:00-01:00)",
                    "丑": "축시 (01:00-03:00)",
                    "寅": "인시 (03:00-05:00)",
                    "卯": "묘시 (05:00-07:00)",
                    "辰": "진시 (07:00-09:00)",
                    "巳": "사시 (09:00-11:00)",
                    "午": "오시 (11:00-13:00)",
                    "未": "미시 (13:00-15:00)",
                    "申": "신시 (15:00-17:00)",
                    "酉": "유시 (17:00-19:00)",
                    "戌": "술시 (19:00-21:00)",
                    "亥": "해시 (21:00-23:00)"
                },
                zodiacSigns: ["쥐", "소", "호랑이", "토끼", "용", "뱀", "말", "양", "원숭이", "닭", "개", "돼지"],
                inputSummaryTpl: "음력 출생: $birthYear년（$birthZodiac）$birthMonth $birthTime | 현재 연도: $currentYear년（$currentYearZodiac）",
                greatFortune: "대길",
                goodFortune: "소길",
                badFortune: "소흉",
                terribleFortune: "대흉",
                extreme: "극단",
                validationMsg: "음력 출생년월과 시간 정보를 완전히 입력해주세요!",
                usageSteps: [
                    "불당이나 깨끗한 장소에서 해가 뜬 후부터 정오 13:00 사이에 진행하며, 일부 부적은 다른 시간대에 사용합니다.",
                    "모서리를 접으며: '나무대자비부!'를 세 번 외칩니다.",
                    "영험부적의 신령, 천인, 호법신의 강림을 세 번 청합니다!",
                    "붉은색, 향, 꽃, 과일, 차, 과자 등을 편의에 따라 공양하며, 본문의 자손은 모두 공양할 수 있습니다.",
                    "스승, 본명, 호법의 강림을 청합니다!",
                    "영험부적의 신령, 천인, 호법의 보호를 세 번 청합니다!",
                    "해결하고자 하는 재난에 대해 설명하고, 가지와 보호를 청합니다.",
                    "대명주를 21번 이상 외우고, 영험부적의 신령, 천인, 호법신에게 회향하며 감사드립니다.",
                    "기도를 꽃으로 화하거나, 향을 화하거나, 종이를 불에 태우며, 구체적으로는 영부 권내의 지시 문자를 참고하세요."
                ]
            }
        };
        
        let currentLang = 'zh_CN';
        
        // Set language
        function setLanguage(lang) {
            currentLang = lang;
            
            // Update UI text elements
            document.getElementById('mainTitle').textContent = translations[lang].mainTitle;
            document.getElementById('subtitle').textContent = translations[lang].subtitle;
            document.getElementById('birthYearLabel').textContent = translations[lang].birthYearLabel;
            document.getElementById('birthMonthLabel').textContent = translations[lang].birthMonthLabel;
            document.getElementById('birthTimeLabel').textContent = translations[lang].birthTimeLabel;
            document.getElementById('selectPrompt').textContent = translations[lang].selectPrompt;
            document.getElementById('selectMonthPrompt').textContent = translations[lang].selectMonthPrompt;
            document.getElementById('selectTimePrompt').textContent = translations[lang].selectTimePrompt;
            document.getElementById('queryBtnText').textContent = translations[lang].queryBtnText;
            document.getElementById('resultTitle').textContent = translations[lang].resultTitle;
            document.getElementById('bengMingTitle').textContent = translations[lang].bengMingTitle;
            document.getElementById('suiJunTitle').textContent = translations[lang].suiJunTitle;
            document.getElementById('fortuneTitle').textContent = translations[lang].fortuneTitle;
            document.getElementById('lingFuTitle').textContent = translations[lang].lingFuTitle;
            document.getElementById('effectTitle').textContent = translations[lang].effectTitle;
            document.getElementById('usageTitle').textContent = translations[lang].usageTitle;
            document.getElementById('getLingfuText').textContent = translations[lang].getLingfuText;
            document.getElementById('footerText').textContent = translations[lang].footerText;
            
            // Update usage steps
            const usageSteps = document.getElementById('usageSteps');
            usageSteps.innerHTML = '';
            translations[lang].usageSteps.forEach(step => {
                const li = document.createElement('li');
                li.textContent = step;
                usageSteps.appendChild(li);
            });
            
            // Re-populate dropdowns
            populateMonths();
            populateTimes();
            // Re-populate years with new language
            populateYears();
            
            // Toggle active class for language buttons
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });
        }
        
        // Data for calculations
        const bengMingTable = {
            "正月": { "子": "卯", "丑": "寅", "寅": "丑", "卯": "子", "辰": "亥", "巳": "戌", "午": "酉", "未": "申", "申": "未", "酉": "午", "戌": "巳", "亥": "辰" },
            "二月": { "子": "寅", "丑": "丑", "寅": "子", "卯": "亥", "辰": "戌", "巳": "酉", "午": "申", "未": "未", "申": "午", "酉": "巳", "戌": "辰", "亥": "卯" },
            "三月": { "子": "丑", "丑": "子", "寅": "亥", "卯": "戌", "辰": "酉", "巳": "申", "午": "未", "未": "午", "申": "巳", "酉": "辰", "戌": "卯", "亥": "寅" },
            "四月": { "子": "子", "丑": "亥", "寅": "戌", "卯": "酉", "辰": "申", "巳": "未", "午": "午", "未": "巳", "申": "辰", "酉": "卯", "戌": "寅", "亥": "丑" },
            "五月": { "子": "亥", "丑": "戌", "寅": "酉", "卯": "申", "辰": "未", "巳": "午", "午": "巳", "未": "辰", "申": "卯", "酉": "寅", "戌": "丑", "亥": "子" },
            "六月": { "子": "戌", "丑": "酉", "寅": "申", "卯": "未", "辰": "午", "巳": "巳", "午": "辰", "未": "卯", "申": "寅", "酉": "丑", "戌": "子", "亥": "亥" },
            "七月": { "子": "酉", "丑": "申", "寅": "未", "卯": "午", "辰": "巳", "巳": "辰", "午": "卯", "未": "寅", "申": "丑", "酉": "子", "戌": "亥", "亥": "戌" },
            "八月": { "子": "申", "丑": "未", "寅": "午", "卯": "巳", "辰": "辰", "巳": "卯", "午": "寅", "未": "丑", "申": "子", "酉": "亥", "戌": "戌", "亥": "酉" },
            "九月": { "子": "未", "丑": "午", "寅": "巳", "卯": "辰", "辰": "卯", "巳": "寅", "午": "丑", "未": "子", "申": "亥", "酉": "戌", "戌": "酉", "亥": "申" },
            "十月": { "子": "午", "丑": "巳", "寅": "辰", "卯": "卯", "辰": "寅", "巳": "丑", "午": "子", "未": "亥", "申": "戌", "酉": "酉", "戌": "申", "亥": "未" },
            "十一月": { "子": "巳", "丑": "辰", "寅": "卯", "卯": "寅", "辰": "丑", "巳": "子", "午": "亥", "未": "戌", "申": "酉", "酉": "申", "戌": "未", "亥": "午" },
            "十二月": { "子": "辰", "丑": "卯", "寅": "寅", "卯": "丑", "辰": "子", "巳": "亥", "午": "戌", "未": "酉", "申": "申", "酉": "未", "戌": "午", "亥": "巳" }
        };

        const suiJunTable = {
            "子": {
                "子年": "太岁符", "丑年": "除秽养神", "寅年": "驱邪缚魅", "卯年": "福德符", 
                "辰年": "白虎消灾", "巳年": "龙德符", "午年": "太岁护佑", "未年": "保命护身", 
                "申年": "五鬼卫护", "酉年": "太阴纳福", "戌年": "祛邪保真", "亥年": "金光神卫"
            },
            "丑": {
                "子年": "金光神卫", "丑年": "太岁符", "寅年": "除秽养神", "卯年": "驱邪缚魅", 
                "辰年": "福德符", "巳年": "白虎消灾", "午年": "龙德符", "未年": "太岁护佑", 
                "申年": "保命护身", "酉年": "五鬼卫护", "戌年": "太阴纳福", "亥年": "祛邪保真"
            },
            "寅": {
                "子年": "祛邪保真", "丑年": "金光神卫", "寅年": "太岁符", "卯年": "除秽养神", 
                "辰年": "驱邪缚魅", "巳年": "福德符", "午年": "白虎消灾", "未年": "龙德符", 
                "申年": "太岁护佑", "酉年": "保命护身", "戌年": "五鬼卫护", "亥年": "太阴纳福"
            },
            "卯": {
                "子年": "太阴纳福", "丑年": "祛邪保真", "寅年": "金光神卫", "卯年": "太岁符", 
                "辰年": "除秽养神", "巳年": "驱邪缚魅", "午年": "福德符", "未年": "白虎消灾", 
                "申年": "龙德符", "酉年": "太岁护佑", "戌年": "保命护身", "亥年": "五鬼卫护"
            },
            "辰": {
                "子年": "五鬼卫护", "丑年": "太阴纳福", "寅年": "祛邪保真", "卯年": "金光神卫", 
                "辰年": "太岁符", "巳年": "除秽养神", "午年": "驱邪缚魅", "未年": "福德符", 
                "申年": "白虎消灾", "酉年": "龙德符", "戌年": "太岁护佑", "亥年": "保命护身"
            },
            "巳": {
                "子年": "保命护身", "丑年": "五鬼卫护", "寅年": "太阴纳福", "卯年": "祛邪保真", 
                "辰年": "金光神卫", "巳年": "太岁符", "午年": "除秽养神", "未年": "驱邪缚魅", 
                "申年": "福德符", "酉年": "白虎消灾", "戌年": "龙德符", "亥年": "太岁护佑"
            },
            "午": {
                "子年": "太岁护佑", "丑年": "保命护身", "寅年": "五鬼卫护", "卯年": "太阴纳福", 
                "辰年": "祛邪保真", "巳年": "金光神卫", "午年": "太岁符", "未年": "除秽养神", 
                "申年": "驱邪缚魅", "酉年": "福德符", "戌年": "白虎消灾", "亥年": "龙德符"
            },
            "未": {
                "子年": "龙德符", "丑年": "太岁护佑", "寅年": "保命护身", "卯年": "五鬼卫护", 
                "辰年": "太阴纳福", "巳年": "祛邪保真", "午年": "金光神卫", "未年": "太岁符", 
                "申年": "除秽养神", "酉年": "驱邪缚魅", "戌年": "福德符", "亥年": "白虎消灾"
            },
            "申": {
                "子年": "白虎消灾", "丑年": "龙德符", "寅年": "太岁护佑", "卯年": "保命护身", 
                "辰年": "五鬼卫护", "巳年": "太阴纳福", "午年": "祛邪保真", "未年": "金光神卫", 
                "申年": "太岁符", "酉年": "除秽养神", "戌年": "驱邪缚魅", "亥年": "福德符"
            },
            "酉": {
                "子年": "福德符", "丑年": "白虎消灾", "寅年": "龙德符", "卯年": "太岁护佑", 
                "辰年": "保命护身", "巳年": "五鬼卫护", "午年": "太阴纳福", "未年": "祛邪保真", 
                "申年": "金光神卫", "酉年": "太岁符", "戌年": "除秽养神", "亥年": "驱邪缚魅"
            },
            "戌": {
                "子年": "驱邪缚魅", "丑年": "福德符", "寅年": "白虎消灾", "卯年": "龙德符", 
                "辰年": "太岁护佑", "巳年": "保命护身", "午年": "五鬼卫护", "未年": "太阴纳福", 
                "申年": "祛邪保真", "酉年": "金光神卫", "戌年": "太岁符", "亥年": "除秽养神"
            },
            "亥": {
                "子年": "除秽养神", "丑年": "驱邪缚魅", "寅年": "福德符", "卯年": "白虎消灾", 
                "辰年": "龙德符", "巳年": "太岁护佑", "午年": "保命护身", "未年": "五鬼卫护", 
                "申年": "太阴纳福", "酉年": "祛邪保真", "戌年": "金光神卫", "亥年": "太岁符"
            }
        };

        const fortuneTable = {
            "太岁符": "极端",
            "白虎消灾": "大凶",
            "祛邪保真": "小凶",
            "除秽养神": "小凶",
            "金光神卫": "小凶",
            "五鬼卫护": "大凶",
            "太岁护佑": "大凶",
            "福德符": "大吉",
            "太阴纳福": "小凶",
            "驱邪缚魅": "大凶",
            "保命护身": "大凶",
            "龙德符": "大吉"
        };

        const effectTable = {
            "驱邪缚魅符": "人逢此年，宜注意勿远行，守平安，否则易招倒霉、口舌、是非、损伤、受人陷害或环境职业上不良之改变，严重则有官讼牢之虑，故宜用驱邪缚魅符制化，方能避凶趋吉。",
            "除秽养神符": "人逢此年，宜注意卫生，不宜探病，小心愁闷身厄灾。勿入病人家，勿探病，勿食丧物品。犯者，则以此除秽养神符和药物化饮，病较快治愈。",
            "白虎消灾符": "人逢此年，宜注意血光意外灾、家运、不和睦、伤人口、强烈破财、官事等不测凶事。有喜可破灾，无喜百事来。故犯者，宣用白虎消灾符及三性祭送，可保安宁。",
            "保命护身符": "人逢此年，宜注意勿观丧礼，勿探看病人，切恐易遭官灾、刑罚、诉讼、争讼、争斗、受伤、破财及精神上痛苦等之不吉事，宜用保命护身符及银纸焚化，确保平安无事。",
            "太岁护佑符": "人逢此年，宜防欠安、破财、盗贼、火劫，凡事欠吉，麻烦多事，安分守己，忍耐谦让为美，宜用太岁护佑符制化，拜神叩祈，可保阖家平安。",
            "五鬼卫护符": "人逢此年，宜注意小人是非，无故平地风波起，易招阴邪、怪疾、官讼、牢狱、破财之灾，交友谨慎防暗害，故须以五鬼卫护符合同银纸焚化，反有五鬼助财运并带来好运。",
            "金光神卫符": "人逢此年，虚花不聚财，宜注意人物之走失，休管他人事，与人冲突不和，是非破财，并防家庭风波，宜用金光神卫符合金纸焚化，每月二十七日白天，向东方叩拜太阳星君，即可保平安。",
            "祛邪保真符": "人逢此年，宣注意孝服临身，勿探病，勿观丧礼，有破财及亲友重疾、伤亡之坏消息。为防灾祸，宜用祛邪保真符制化，保平安。",
            "太阴纳福符": "人逢此年，宜注意欠安、口舌、仇恨、风波、深夜不走暗路，且事多纠缠，尤其要注意因异性引起破财、纠纷事，故宜用太阴纳福符合金纸焚化，每月阴历二十六日夜晚，向西叩拜太阴星君，保平安。",
            "太岁符": "人逢此年，需请此太岁符供奉，以求平安无事，工商利兴，五谷丰收，六畜兴旺，万事如意，福运亨通。",
            "福德符": "人逢此年，用此符可得福德与善缘，趋吉避凶。",
            "龙德符": "人逢此年，用此符可得龙神护佑，消灾纳福，万事如意。"
        };
        
        // Populate years dropdown
        function populateYears() {
            const yearSelect = document.getElementById('birthYear');
            yearSelect.innerHTML = `<option value="" id="selectPrompt">${translations[currentLang].selectPrompt}</option>`;
            
            const currentYear = new Date().getFullYear();
            
            for (let year = currentYear - 100; year <= currentYear; year++) {
                const option = document.createElement('option');
                option.value = year;
                const zodiacSign = getZodiacSign(year);
                option.textContent = `${year}${translations[currentLang].yearSuffix} (${zodiacSign})`;
                yearSelect.appendChild(option);
            }
        }
        
        // Populate months dropdown
        function populateMonths() {
            const monthSelect = document.getElementById('birthMonth');
            monthSelect.innerHTML = `<option value="" id="selectMonthPrompt">${translations[currentLang].selectMonthPrompt}</option>`;
            
            for (let i = 1; i <= 12; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = translations[currentLang].monthNames[i];
                monthSelect.appendChild(option);
            }
        }
        
        // Populate times dropdown
        function populateTimes() {
            const timeSelect = document.getElementById('birthTime');
            timeSelect.innerHTML = `<option value="" id="selectTimePrompt">${translations[currentLang].selectTimePrompt}</option>`;
            
            const timeKeys = ["子", "丑", "寅", "卯", "辰", "巳", "午", "未", "申", "酉", "戌", "亥"];
            
            for (const time of timeKeys) {
                const option = document.createElement('option');
                option.value = time;
                option.textContent = translations[currentLang].timeNames[time];
                timeSelect.appendChild(option);
            }
        }
        
        // Chinese zodiac conversion
        function getZodiacSign(year) {
            return translations[currentLang].zodiacSigns[(year - 4) % 12];
        }
        
        // Get chinese year name (e.g., "子年")
        function getChineseYearName(year) {
            return earthlyBranches[(year - 4) % 12] + "年";
        }
        
        const earthlyBranches = ["子", "丑", "寅", "卯", "辰", "巳", "午", "未", "申", "酉", "戌", "亥"];
        
        // Initialize particles.js
        function initParticles() {
            particlesJS('particles-js', {
                "particles": {
                    "number": {
                        "value": 80,
                        "density": {
                            "enable": true,
                            "value_area": 800
                        }
                    },
                    "color": {
                        "value": "#d4a017"
                    },
                    "shape": {
                        "type": "circle",
                        "stroke": {
                            "width": 0,
                            "color": "#000000"
                        },
                        "polygon": {
                            "nb_sides": 5
                        }
                    },
                    "opacity": {
                        "value": 0.5,
                        "random": true,
                        "anim": {
                            "enable": true,
                            "speed": 1,
                            "opacity_min": 0.1,
                            "sync": false
                        }
                    },
                    "size": {
                        "value": 3,
                        "random": true,
                        "anim": {
                            "enable": true,
                            "speed": 2,
                            "size_min": 0.3,
                            "sync": false
                        }
                    },
                    "line_linked": {
                        "enable": true,
                        "distance": 150,
                        "color": "#a81c07",
                        "opacity": 0.4,
                        "width": 1
                    },
                    "move": {
                        "enable": true,
                        "speed": 2,
                        "direction": "none",
                        "random": true,
                        "straight": false,
                        "out_mode": "out",
                        "bounce": false,
                        "attract": {
                            "enable": true,
                            "rotateX": 600,
                            "rotateY": 1200
                        }
                    }
                },
                "interactivity": {
                    "detect_on": "canvas",
                    "events": {
                        "onhover": {
                            "enable": true,
                            "mode": "grab"
                        },
                        "onclick": {
                            "enable": true,
                            "mode": "push"
                        },
                        "resize": true
                    },
                    "modes": {
                        "grab": {
                            "distance": 140,
                            "line_linked": {
                                "opacity": 1
                            }
                        },
                        "bubble": {
                            "distance": 400,
                            "size": 40,
                            "duration": 2,
                            "opacity": 8,
                            "speed": 3
                        },
                        "repulse": {
                            "distance": 200,
                            "duration": 0.4
                        },
                        "push": {
                            "particles_nb": 4
                        },
                        "remove": {
                            "particles_nb": 2
                        }
                    }
                },
                "retina_detect": true
            });
        }
        
        // Add floating symbols
        function addFloatingSymbols() {
            const floatingElements = document.querySelector('.floating-elements');
            const symbols = ['卦', '符', '命', '运', '道', '法', '灵', '德', '佑', '福', '吉', '祥'];
            
            for (let i = 0; i < 24; i++) {
                const symbol = document.createElement('div');
                symbol.className = 'floating-symbol';
                symbol.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                
                const size = Math.random() * 2 + 1;
                const left = Math.random() * 100;
                const duration = Math.random() * 40 + 20;
                const delay = Math.random() * 40;
                
                symbol.style.left = `${left}%`;
                symbol.style.fontSize = `${size}rem`;
                symbol.style.opacity = `${0.1 - size * 0.02}`;
                symbol.style.animationDuration = `${duration}s`;
                symbol.style.animationDelay = `${delay}s`;
                
                floatingElements.appendChild(symbol);
            }
        }
        
        // Play animation
        function playAnimation() {
            const container = document.getElementById('animationContainer');
            container.style.display = 'block';
            container.innerHTML = '';
            
            // Create magic circle
            const magicCircle = document.createElement('div');
            magicCircle.className = 'magic-circle';
            
            // Add circle layers
            for (let i = 0; i < 4; i++) {
                const circleLayer = document.createElement('div');
                circleLayer.className = 'circle-layer';
                magicCircle.appendChild(circleLayer);
            }
            
            // Add magic symbols
            const magicSymbols = document.createElement('div');
            magicSymbols.className = 'magic-symbols';
            
            const symbolsCount = 8;
            const symbols = ['卦', '符', '命', '运', '道', '法', '灵', '德'];
            
            for (let i = 0; i < symbolsCount; i++) {
                const symbol = document.createElement('div');
                symbol.className = 'magic-symbol';
                symbol.textContent = symbols[i % symbols.length];
                
                // Position symbols evenly around the circle
                const angle = (i / symbolsCount) * 2 * Math.PI;
                const radius = 40; // percentage of circle radius
                const x = 50 + radius * Math.cos(angle);
                const y = 50 + radius * Math.sin(angle);
                
                symbol.style.left = `${x}%`;
                symbol.style.top = `${y}%`;
                
                magicSymbols.appendChild(symbol);
            }
            
            magicCircle.appendChild(magicSymbols);
            container.appendChild(magicCircle);
            
            // Create central talisman
            const talisman = document.createElement('div');
            talisman.className = 'talisman';
            talisman.style.left = '50%';
            talisman.style.top = '50%';
            container.appendChild(talisman);
            
            // Create particles
            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'energy-particle';
                    
                    const startX = window.innerWidth / 2;
                    const startY = window.innerHeight / 2;
                    const tx = (Math.random() - 0.5) * window.innerWidth;
                    const ty = (Math.random() - 0.5) * window.innerHeight;
                    
                    particle.style.left = `${startX}px`;
                    particle.style.top = `${startY}px`;
                    particle.style.setProperty('--tx', `${tx}px`);
                    particle.style.setProperty('--ty', `${ty}px`);
                    
                    particle.style.animation = `particleAnimation ${Math.random() * 2 + 1}s linear forwards`;
                    
                    container.appendChild(particle);
                }, i * 20);
            }
            
            // Create flying symbols
            const flyingSymbols = ['卦', '符', '命', '运', '道', '法', '灵', '德'];
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const symbol = document.createElement('div');
                    symbol.className = 'flying-symbol';
                    symbol.textContent = flyingSymbols[Math.floor(Math.random() * flyingSymbols.length)];
                    
                    symbol.style.left = `${window.innerWidth / 2}px`;
                    symbol.style.top = `${window.innerHeight / 2}px`;
                    symbol.style.setProperty('--rotate', `${Math.random() * 360}deg`);
                    
                    symbol.style.animation = `symbolAnimation ${Math.random() * 1.5 + 1}s linear forwards`;
                    
                    container.appendChild(symbol);
                }, i * 100 + 500);
            }
            
            // Hide animation container after animation completes
            setTimeout(() => {
                container.style.display = 'none';
            }, 3000);
        }
        
        // Function to get fortune class
        function getFortuneClass(fortune) {
            if (fortune === translations[currentLang].greatFortune) return "great-fortune";
            if (fortune === translations[currentLang].goodFortune) return "good-fortune";
            if (fortune === translations[currentLang].badFortune) return "bad-fortune";
            if (fortune === translations[currentLang].terribleFortune || fortune === translations[currentLang].extreme) return "terrible-fortune";
            return "";
        }
        
        // Translate fortune
        function translateFortune(chineseFortune) {
            switch(chineseFortune) {
                case "大吉": return translations[currentLang].greatFortune;
                case "小吉": return translations[currentLang].goodFortune;
                case "小凶": return translations[currentLang].badFortune;
                case "大凶": return translations[currentLang].terribleFortune;
                case "极端": return translations[currentLang].extreme;
                default: return chineseFortune;
            }
        }
        
        // Main query function
        function performQuery() {
            const birthYear = document.getElementById('birthYear').value;
            const birthMonth = document.getElementById('birthMonth').value;
            const birthTime = document.getElementById('birthTime').value;
            
            // Validate inputs
            if (!birthYear || !birthMonth || !birthTime) {
                alert(translations[currentLang].validationMsg);
                return;
            }
            
            // Show animation
            playAnimation();
            
            // After a delay to show the animation, process the results
            setTimeout(() => {
                // Get current year
                const currentYear = new Date().getFullYear();
                
                // Get birth zodiac and current year zodiac
                const birthZodiac = getZodiacSign(birthYear);
                const currentYearZodiac = getZodiacSign(currentYear);
                
                // Get current year's Chinese name (e.g., "子年")
                const currentYearChineseName = getChineseYearName(currentYear);
                
                // Convert month number to Chinese month name
                const birthMonthChinese = translations[currentLang].monthNames[birthMonth];
                
                // Step 1: Find Ben Ming (本命宫位)
                // For non-Chinese languages, we still use the Chinese month names and time characters for lookup
                const chineseMonthNames = ["", "正月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一月", "十二月"];
                const benMing = bengMingTable[chineseMonthNames[birthMonth]][birthTime];
                
                // Step 2: Find Sui Jun (岁君)
                const suiJun = suiJunTable[benMing][currentYearChineseName];
                
                // Step 3: Find Fortune (吉凶)
                const chineseFortune = fortuneTable[suiJun];
                const fortune = translateFortune(chineseFortune);
                
                // Step 4: Determine Ling Fu name (灵符)
                let lingFu = suiJun;
                if (!lingFu.endsWith("符")) {
                    lingFu += "符";
                }
                
                // Step 5: Get effect (效用)
                const effect = effectTable[lingFu];
                
                // Update input summary
                let summaryTemplate = translations[currentLang].inputSummaryTpl;
                summaryTemplate = summaryTemplate
                    .replace('$birthYear', birthYear)
                    .replace('$birthZodiac', birthZodiac)
                    .replace('$birthMonth', birthMonthChinese)
                    .replace('$birthTime', translations[currentLang].timeNames[birthTime].split(' ')[0])
                    .replace('$currentYear', currentYear)
                    .replace('$currentYearZodiac', currentYearZodiac);
                
                document.getElementById('inputSummary').innerHTML = summaryTemplate;
                
                // Update result cards
                document.getElementById('bengMingResult').textContent = benMing;
                document.getElementById('suiJunResult').textContent = suiJun;
                
                // Set fortune with appropriate styling
                const fortuneElement = document.getElementById('fortuneResult');
                fortuneElement.innerHTML = `${fortune} <span class="fortune-level ${getFortuneClass(fortune)}">${fortune}</span>`;
                
                document.getElementById('lingFuResult').textContent = lingFu;
                document.getElementById('effectResult').textContent = effect;
                
                // Set up "Get Lingfu" button for the specific talisman
                const getLingfuBtn = document.getElementById('getLingfuBtn');
                getLingfuBtn.onclick = function() {
                    window.open(`https://example.com/talismans/${encodeURIComponent(lingFu)}`, '_blank');
                };
                
                // Show result section
                document.getElementById('resultSection').style.display = 'block';
                
                // Scroll to results
                document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth' });
            }, 3000);
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize particles
            initParticles();
            
            // Set language
            setLanguage('zh_CN');
            
            // Add language switcher handlers
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    setLanguage(btn.dataset.lang);
                });
            });
            
            // Add floating symbols
            addFloatingSymbols();
            
            // Add event listener to query button
            document.getElementById('queryBtn').addEventListener('click', performQuery);
        });
    </script>


</body></html>